<section class="content-header">
    <h1>Países</h1>
    <ol class="breadcrumb">
        <li><i class="fa fa-sitemap"></i> Estrutura</li>
        <li class="active">Países</li>
    </ol>
</section>
<section class="content container-fluid">
    <div class="row">
        <div class="col-md-8">
            <div class="box">
                <div class="box-header">
                    <h3 class="box-title">Lista de Países</h3>
                </div>
                <div class="box-body">
                    <table class="table table-bordered table-striped table-hover">
                        <thead>
                            <tr>
                                <th>Nome</th>
                                <th>Sigla</th>
                                <th>Ações</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr dir-paginate="pais in ListaPaises | itemsPerPage:15" pagination-id="pagPaises">
                                <td>{{pais.name}}</td>
                                <td>{{pais.shortname}}</td>
                                <td class="text-center">
                                    <button class="btn btn-xs btn-warning" ng-click="AlteraPais(pais)"><i class="fa fa-edit"></i></button>
                                    <button class="btn btn-xs btn-danger" ng-click="ExcluiPais(pais)"><i class="fa fa-trash"></i></button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <dir-pagination-controls pagination-id="pagPaises" class="pull-right"></dir-pagination-controls>
                </div>
                <div class="overlay" ng-if="paisesLoad">
                    <i class="fa fa-sync fa-spin"></i>
                </div>
            </div>
        </div>
        <div class="col-md-4">
            <div class="box box-warning" ng-if="PaisAlterar">
                <div class="box-header with-border">
                    <h3 class="box-title">Alterar País</h3>
                </div>
                <div class="box-body">
                    <div class="form-group">
                        <label>Nome</label>
                        <input class="form-control" placeholder="Digite o nome do país" type="text" ng-model="PaisAlterar.name" ng-disabled="uploadFlag"/>
                    </div>
                    <div class="form-group">
                        <label>Sigla</label>
                        <input class="form-control" placeholder="Digite a sigla do país" type="text" ng-model="PaisAlterar.shortname" ng-disabled="uploadFlag"/>
                    </div>
                    <div class="form-group" flow-init="{singleFile:true}" flow-upload-started="ToggleUploadFlag(true)" flow-complete="ToggleUploadFlag(false)" flow-file-added="!!{png:1,jpg:1,jpeg:1}[$file.getExtension()]" flow-files-submitted="$flow.upload()" flow-file-success="DefineImagemPaisAlterar($message, $flow)">
                        <label>Imagem: <i class="fa fa-spin fa-spinner" ng-if="uploadFlag"></i></label>
                        <div>
                            <a data-href="#" class="btn btn-xs btn-primary" ng-hide="$flow.files.length" flow-btn flow-attrs="{accept:'image/*'}" ng-disabled="uploadFlag">Selecionar imagem</a>
                            <a data-href="#" class="btn btn-xs btn-warning" ng-show="$flow.files.length" flow-btn flow-attrs="{accept:'image/*'}" ng-disabled="uploadFlag">Trocar</a>
                            <a data-href="#" class="btn btn-xs btn-danger" ng-show="$flow.files.length" ng-click="CancelaImagem($flow, PaisAlterar.id_image)" ng-disabled="uploadFlag">Remover</a>
                        </div>
                        <p><small>Envie apenas imagens JPG ou PNG.</small></p>
                        <div class="thumbnail">
                            <img src="http://www.placehold.it/200x150/EFEFEF/AAAAAA&text=sem+imagem" ng-hide="$flow.files.length||PaisAlterar.image"/>
                            <img ng-src="{{APIBaseUrl+PaisAlterar.image}}" ng-if="PaisAlterar.image&&!$flow.files.length"/>
                            <img flow-img="$flow.files[0]" ng-show="$flow.files.length"/>
                        </div>
                    </div>
                </div>
                <div class="box-footer">
                    <button type="submit" class="btn btn-default" ng-click="AlteraPais(false)" ng-disabled="uploadFlag">Cancelar</button>
                    <button type="submit" class="btn btn-primary pull-right" ng-click="SalvarPais()" ng-disabled="uploadFlag">Alterar</button>
                </div>
                <div class="overlay" ng-if="alterarPaisLoad">
                    <i class="fa fa-sync fa-spin"></i>
                </div>
            </div>
            <div class="box box-info">
                <div class="box-header with-border">
                    <h3 class="box-title">Cadastrar País</h3>
                </div>
                <div class="box-body">
                    <div class="form-group">
                        <label>Nome</label>
                        <input class="form-control" placeholder="Digite o nome do país" type="text" ng-model="NomeNovoPais" ng-disabled="uploadFlag"/>
                    </div>
                    <div class="form-group">
                        <label>Sigla</label>
                        <input class="form-control" placeholder="Digite a sigla do país" type="text" ng-model="SiglaNovoPais" ng-disabled="uploadFlag"/>
                    </div>
                    <div class="form-group" flow-init="{singleFile:true}" flow-upload-started="ToggleUploadFlag(true)" flow-complete="ToggleUploadFlag(false)" flow-file-added="!!{png:1,jpg:1,jpeg:1}[$file.getExtension()]" flow-files-submitted="$flow.upload()" flow-file-success="DefineImagemNovoPais($message, $flow)">
                        <label>Imagem: <i class="fa fa-spin fa-spinner" ng-if="uploadFlag"></i></label>
                        <div>
                            <a data-href="#" class="btn btn-xs btn-primary" ng-hide="$flow.files.length" flow-btn flow-attrs="{accept:'image/*'}" ng-disabled="uploadFlag">Selecionar imagem</a>
                            <a data-href="#" class="btn btn-xs btn-warning" ng-show="$flow.files.length" flow-btn flow-attrs="{accept:'image/*'}" ng-disabled="uploadFlag">Trocar</a>
                            <a data-href="#" class="btn btn-xs btn-danger" ng-show="$flow.files.length"  ng-click="CancelaImagem($flow, ImagemNovoPais)" ng-disabled="uploadFlag">Remover</a>
                        </div>
                        <p><small>Envie apenas imagens JPG ou PNG.</small></p>
                        <div class="thumbnail">
                            <img src="http://www.placehold.it/200x150/EFEFEF/AAAAAA&text=sem+imagem" ng-hide="$flow.files.length"/>
                            <img flow-img="$flow.files[0]" ng-show="$flow.files.length"/>
                        </div>
                    </div>
                </div>
                <div class="box-footer">
                    <button type="submit" class="btn btn-primary pull-right" ng-click="NovoPais()" ng-disabled="uploadFlag">Cadastrar</button>
                </div>
                <div class="overlay" ng-if="novoPaisLoad">
                    <i class="fa fa-sync fa-spin"></i>
                </div>
            </div>
        </div>
    </div>
</section>
